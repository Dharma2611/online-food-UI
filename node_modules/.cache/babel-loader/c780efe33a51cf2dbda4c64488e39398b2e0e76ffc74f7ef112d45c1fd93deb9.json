{"ast":null,"code":"import * as ActionType from \"./ActionType\";\nimport { LOGOUT } from \"../Authentication/ActionType\";\nconst initialState = {\n  cart: {\n    items: [],\n    total: 0\n  },\n  loading: false,\n  error: null\n};\nexport const cartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ActionType.FIND_CART_REQUEST:\n    case ActionType.GET_ALL_CART_ITEMS_REQUEST:\n    case ActionType.UPDATE_CART_ITEM_REQUEST:\n    case ActionType.REMOVE_FROM_CART_REQUEST:\n      return {\n        ...state,\n        loading: true,\n        error: null\n      };\n    case ActionType.FIND_CART_SUCCESS:\n      return {\n        ...state,\n        cart: action.payload.cart,\n        // Ensure this matches the API response\n        loading: false,\n        error: null\n      };\n    case ActionType.ADD_TO_CART_SUCCESS:\n      return {\n        ...state,\n        cart: {\n          ...state.cart,\n          items: [...state.cart.items, action.payload.cartItem]\n        },\n        loading: false,\n        error: null\n      };\n    case ActionType.UPDATE_CART_ITEM_SUCCESS:\n      return {\n        ...state,\n        cart: {\n          ...state.cart,\n          items: state.cart.items.map(item => item.id === action.payload.cartItem.id ? action.payload.cartItem : item)\n        },\n        loading: false,\n        error: null\n      };\n    case ActionType.REMOVE_FROM_CART_SUCCESS:\n      return {\n        ...state,\n        cart: {\n          ...state.cart,\n          items: state.cart.items.filter(item => item.id !== action.payload.cartItem.id)\n        },\n        loading: false,\n        error: null\n      };\n    case ActionType.FIND_CART_FAILURE:\n    case ActionType.UPDATE_CART_ITEM_FAILURE:\n    case ActionType.REMOVE_FROM_CART_FAILURE:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload.error\n      };\n    case LOGOUT:\n      localStorage.removeItem(\"jwt\");\n      return {\n        ...state,\n        cart: {\n          items: [],\n          total: 0 // Reset the cart on logout\n        },\n        success: \"logout success\"\n      };\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["ActionType","LOGOUT","initialState","cart","items","total","loading","error","cartReducer","state","action","type","FIND_CART_REQUEST","GET_ALL_CART_ITEMS_REQUEST","UPDATE_CART_ITEM_REQUEST","REMOVE_FROM_CART_REQUEST","FIND_CART_SUCCESS","payload","ADD_TO_CART_SUCCESS","cartItem","UPDATE_CART_ITEM_SUCCESS","map","item","id","REMOVE_FROM_CART_SUCCESS","filter","FIND_CART_FAILURE","UPDATE_CART_ITEM_FAILURE","REMOVE_FROM_CART_FAILURE","localStorage","removeItem","success"],"sources":["C:/Users/gangw/OneDrive/Desktop/online-frontend/src/State/Cart/Reducer.js"],"sourcesContent":["import * as ActionType from \"./ActionType\";\r\nimport { LOGOUT } from \"../Authentication/ActionType\";\r\n\r\nconst initialState = {\r\n  cart: {\r\n    items: [],\r\n    total: 0,\r\n  },\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\nexport const cartReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ActionType.FIND_CART_REQUEST:\r\n    case ActionType.GET_ALL_CART_ITEMS_REQUEST:\r\n    case ActionType.UPDATE_CART_ITEM_REQUEST:\r\n    case ActionType.REMOVE_FROM_CART_REQUEST:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        error: null,\r\n      };\r\n\r\n    case ActionType.FIND_CART_SUCCESS:\r\n      return {\r\n        ...state,\r\n        cart: action.payload.cart, // Ensure this matches the API response\r\n        loading: false,\r\n        error: null,\r\n      };\r\n\r\n    case ActionType.ADD_TO_CART_SUCCESS:\r\n      return {\r\n        ...state,\r\n        cart: {\r\n          ...state.cart,\r\n          items: [...state.cart.items, action.payload.cartItem],\r\n        },\r\n        loading: false,\r\n        error: null,\r\n      };\r\n\r\n    case ActionType.UPDATE_CART_ITEM_SUCCESS:\r\n      return {\r\n        ...state,\r\n        cart: {\r\n          ...state.cart,\r\n          items: state.cart.items.map((item) =>\r\n            item.id === action.payload.cartItem.id\r\n              ? action.payload.cartItem\r\n              : item\r\n          ),\r\n        },\r\n        loading: false,\r\n        error: null,\r\n      };\r\n\r\n    case ActionType.REMOVE_FROM_CART_SUCCESS:\r\n      return {\r\n        ...state,\r\n        cart: {\r\n          ...state.cart,\r\n          items: state.cart.items.filter(\r\n            (item) => item.id !== action.payload.cartItem.id\r\n          ),\r\n        },\r\n        loading: false,\r\n        error: null,\r\n      };\r\n\r\n    case ActionType.FIND_CART_FAILURE:\r\n    case ActionType.UPDATE_CART_ITEM_FAILURE:\r\n    case ActionType.REMOVE_FROM_CART_FAILURE:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload.error,\r\n      };\r\n\r\n    case LOGOUT:\r\n      localStorage.removeItem(\"jwt\");\r\n      return {\r\n        ...state,\r\n        cart: {\r\n          items: [],\r\n          total: 0, // Reset the cart on logout\r\n        },\r\n        success: \"logout success\",\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAO,KAAKA,UAAU,MAAM,cAAc;AAC1C,SAASC,MAAM,QAAQ,8BAA8B;AAErD,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAE;IACJC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE;EACT,CAAC;EACDC,OAAO,EAAE,KAAK;EACdC,KAAK,EAAE;AACT,CAAC;AAED,OAAO,MAAMC,WAAW,GAAGA,CAACC,KAAK,GAAGP,YAAY,EAAEQ,MAAM,KAAK;EAC3D,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKX,UAAU,CAACY,iBAAiB;IACjC,KAAKZ,UAAU,CAACa,0BAA0B;IAC1C,KAAKb,UAAU,CAACc,wBAAwB;IACxC,KAAKd,UAAU,CAACe,wBAAwB;MACtC,OAAO;QACL,GAAGN,KAAK;QACRH,OAAO,EAAE,IAAI;QACbC,KAAK,EAAE;MACT,CAAC;IAEH,KAAKP,UAAU,CAACgB,iBAAiB;MAC/B,OAAO;QACL,GAAGP,KAAK;QACRN,IAAI,EAAEO,MAAM,CAACO,OAAO,CAACd,IAAI;QAAE;QAC3BG,OAAO,EAAE,KAAK;QACdC,KAAK,EAAE;MACT,CAAC;IAEH,KAAKP,UAAU,CAACkB,mBAAmB;MACjC,OAAO;QACL,GAAGT,KAAK;QACRN,IAAI,EAAE;UACJ,GAAGM,KAAK,CAACN,IAAI;UACbC,KAAK,EAAE,CAAC,GAAGK,KAAK,CAACN,IAAI,CAACC,KAAK,EAAEM,MAAM,CAACO,OAAO,CAACE,QAAQ;QACtD,CAAC;QACDb,OAAO,EAAE,KAAK;QACdC,KAAK,EAAE;MACT,CAAC;IAEH,KAAKP,UAAU,CAACoB,wBAAwB;MACtC,OAAO;QACL,GAAGX,KAAK;QACRN,IAAI,EAAE;UACJ,GAAGM,KAAK,CAACN,IAAI;UACbC,KAAK,EAAEK,KAAK,CAACN,IAAI,CAACC,KAAK,CAACiB,GAAG,CAAEC,IAAI,IAC/BA,IAAI,CAACC,EAAE,KAAKb,MAAM,CAACO,OAAO,CAACE,QAAQ,CAACI,EAAE,GAClCb,MAAM,CAACO,OAAO,CAACE,QAAQ,GACvBG,IACN;QACF,CAAC;QACDhB,OAAO,EAAE,KAAK;QACdC,KAAK,EAAE;MACT,CAAC;IAEH,KAAKP,UAAU,CAACwB,wBAAwB;MACtC,OAAO;QACL,GAAGf,KAAK;QACRN,IAAI,EAAE;UACJ,GAAGM,KAAK,CAACN,IAAI;UACbC,KAAK,EAAEK,KAAK,CAACN,IAAI,CAACC,KAAK,CAACqB,MAAM,CAC3BH,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKb,MAAM,CAACO,OAAO,CAACE,QAAQ,CAACI,EAChD;QACF,CAAC;QACDjB,OAAO,EAAE,KAAK;QACdC,KAAK,EAAE;MACT,CAAC;IAEH,KAAKP,UAAU,CAAC0B,iBAAiB;IACjC,KAAK1B,UAAU,CAAC2B,wBAAwB;IACxC,KAAK3B,UAAU,CAAC4B,wBAAwB;MACtC,OAAO;QACL,GAAGnB,KAAK;QACRH,OAAO,EAAE,KAAK;QACdC,KAAK,EAAEG,MAAM,CAACO,OAAO,CAACV;MACxB,CAAC;IAEH,KAAKN,MAAM;MACT4B,YAAY,CAACC,UAAU,CAAC,KAAK,CAAC;MAC9B,OAAO;QACL,GAAGrB,KAAK;QACRN,IAAI,EAAE;UACJC,KAAK,EAAE,EAAE;UACTC,KAAK,EAAE,CAAC,CAAE;QACZ,CAAC;QACD0B,OAAO,EAAE;MACX,CAAC;IAEH;MACE,OAAOtB,KAAK;EAChB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}