{"ast":null,"code":"import { ADD_TO_FAVORITE_FAILURE, ADD_TO_FAVORITE_REQUEST, ADD_TO_FAVORITE_SUCCESS, GET_USER_FAILURE, GET_USER_REQUEST, GET_USER_SUCCESS, LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS, LOGOUT, REGISTER_FAILURE, REGISTER_REQUEST, REGISTER_SUCCESS } from \"./ActionType\";\nimport axios from \"axios\";\nimport { API_URL } from \"../../commponent/config/api\";\nimport { useNavigate } from \"react-router-dom\";\nexport const registerUser = reqData => {\n  var _s = $RefreshSig$();\n  return _s(async dispatch => {\n    _s();\n    const navigate = useNavigate();\n    dispatch({\n      type: REGISTER_REQUEST\n    });\n    try {\n      const {\n        data\n      } = await axios.post(`${API_URL}/auth/signup`, reqData.userData);\n      if (data.jwt) localStorage.setItem(\"jwt\", data.jwt);\n      if (data.role === \"ROLE_RESTAURANT_OWNER\") {\n        reqData.navigate(\"/admin/restaurant\");\n      } else {\n        reqData.navigate(\"/\");\n      }\n      dispatch({\n        type: REGISTER_SUCCESS,\n        paylod: data.jwt\n      });\n      console.log(\"register success \", data);\n    } catch (error) {\n      dispatch({\n        type: REGISTER_FAILURE,\n        paylod: error\n      });\n      console.log(\"error\", error);\n    }\n  }, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n    return [useNavigate];\n  });\n};\nexport const loginUser = reqData => async dispatch => {\n  dispatch({\n    type: LOGIN_REQUEST\n  });\n  try {\n    const {\n      data\n    } = await axios.post(`${API_URL}/auth/signin`, reqData.userData);\n    if (data.jwt) localStorage.setItem(\"jwt\", data.jwt);\n    if (data.role === \"ROLE_RESTAURANT_OWNER\") {\n      reqData.navigate(\"/admin/restaurant\");\n    } else {\n      reqData.navigate(\"/\");\n    }\n    dispatch({\n      type: LOGIN_SUCCESS,\n      paylod: data.jwt\n    });\n    console.log(\"login success \", data);\n  } catch (error) {\n    dispatch({\n      type: LOGIN_FAILURE,\n      paylod: error\n    });\n    console.log(\"error\", error);\n  }\n};\nexport const getUser = jwt => async dispatch => {\n  dispatch({\n    type: GET_USER_REQUEST\n  });\n  try {\n    const {\n      data\n    } = await axios.get(`${API_URL}/auth/signin`, {\n      headers: {\n        Authorization: `Bearer ${jwt}`\n      }\n    });\n    dispatch({\n      type: GET_USER_SUCCESS,\n      paylod: data.jwt\n    });\n    console.log(\"register success \", data);\n  } catch (error) {\n    dispatch({\n      type: GET_USER_FAILURE,\n      paylod: error\n    });\n    console.log(\"error\", error);\n  }\n};\nexport const addToFavorite = (jwt, restaurantId) => async dispatch => {\n  dispatch({\n    type: ADD_TO_FAVORITE_REQUEST\n  });\n  try {\n    const {\n      data\n    } = await axios.put(`${API_URL}/api/restaurant${restaurantId}/add-favorite`, {}, {\n      headers: {\n        Authorization: `Bearer ${jwt}`\n      }\n    });\n    dispatch({\n      type: ADD_TO_FAVORITE_SUCCESS,\n      paylod: data\n    });\n    console.log(\"Add to favorite \", data);\n  } catch (error) {\n    dispatch({\n      type: ADD_TO_FAVORITE_FAILURE,\n      paylod: error\n    });\n    console.log(\"error\", error);\n  }\n};\nexport const logout = () => async dispatch => {\n  dispatch({\n    type: ADD_TO_FAVORITE_REQUEST\n  });\n  try {\n    localStorage.clear();\n    dispatch({\n      type: LOGOUT\n    });\n    console.log(\"Logout success \");\n  } catch (error) {\n    console.log(\"error\", error);\n  }\n};","map":{"version":3,"names":["ADD_TO_FAVORITE_FAILURE","ADD_TO_FAVORITE_REQUEST","ADD_TO_FAVORITE_SUCCESS","GET_USER_FAILURE","GET_USER_REQUEST","GET_USER_SUCCESS","LOGIN_FAILURE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGOUT","REGISTER_FAILURE","REGISTER_REQUEST","REGISTER_SUCCESS","axios","API_URL","useNavigate","registerUser","reqData","_s","$RefreshSig$","dispatch","navigate","type","data","post","userData","jwt","localStorage","setItem","role","paylod","console","log","error","loginUser","getUser","get","headers","Authorization","addToFavorite","restaurantId","put","logout","clear"],"sources":["C:/Users/gangw/OneDrive/Desktop/online-frontend/src/State/Authentication/Action.js"],"sourcesContent":["import {\r\n  ADD_TO_FAVORITE_FAILURE,\r\n  ADD_TO_FAVORITE_REQUEST,\r\n  ADD_TO_FAVORITE_SUCCESS,\r\n  GET_USER_FAILURE,\r\n  GET_USER_REQUEST,\r\n  GET_USER_SUCCESS,\r\n  LOGIN_FAILURE,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGOUT,\r\n  REGISTER_FAILURE,\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n} from \"./ActionType\";\r\nimport axios from \"axios\";\r\nimport { API_URL } from \"../../commponent/config/api\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const registerUser = (reqData) => async (dispatch) => {\r\n  const navigate = useNavigate();\r\n  dispatch({ type: REGISTER_REQUEST });\r\n  try {\r\n    const { data } = await axios.post(\r\n      `${API_URL}/auth/signup`,\r\n      reqData.userData\r\n    );\r\n    if (data.jwt) localStorage.setItem(\"jwt\", data.jwt);\r\n    if (data.role === \"ROLE_RESTAURANT_OWNER\") {\r\n      reqData.navigate(\"/admin/restaurant\");\r\n    } else {\r\n      reqData.navigate(\"/\");\r\n    }\r\n    dispatch({ type: REGISTER_SUCCESS, paylod: data.jwt });\r\n    console.log(\"register success \", data);\r\n  } catch (error) {\r\n    dispatch({ type: REGISTER_FAILURE, paylod: error });\r\n    console.log(\"error\", error);\r\n  }\r\n};\r\n\r\nexport const loginUser = (reqData) => async (dispatch) => {\r\n  dispatch({ type: LOGIN_REQUEST });\r\n  try {\r\n    const { data } = await axios.post(\r\n      `${API_URL}/auth/signin`,\r\n      reqData.userData\r\n    );\r\n    if (data.jwt) localStorage.setItem(\"jwt\", data.jwt);\r\n    if (data.role === \"ROLE_RESTAURANT_OWNER\") {\r\n      reqData.navigate(\"/admin/restaurant\");\r\n    } else {\r\n      reqData.navigate(\"/\");\r\n    }\r\n    dispatch({ type: LOGIN_SUCCESS, paylod: data.jwt });\r\n    console.log(\"login success \", data);\r\n  } catch (error) {\r\n    dispatch({ type: LOGIN_FAILURE, paylod: error });\r\n    console.log(\"error\", error);\r\n  }\r\n};\r\n\r\nexport const getUser = (jwt) => async (dispatch) => {\r\n  dispatch({ type: GET_USER_REQUEST });\r\n  try {\r\n    const { data } = await axios.get(`${API_URL}/auth/signin`, {\r\n      headers: {\r\n        Authorization: `Bearer ${jwt}`,\r\n      },\r\n    });\r\n\r\n    dispatch({ type: GET_USER_SUCCESS, paylod: data.jwt });\r\n    console.log(\"register success \", data);\r\n  } catch (error) {\r\n    dispatch({ type: GET_USER_FAILURE, paylod: error });\r\n    console.log(\"error\", error);\r\n  }\r\n};\r\n\r\nexport const addToFavorite = (jwt, restaurantId) => async (dispatch) => {\r\n  dispatch({ type: ADD_TO_FAVORITE_REQUEST });\r\n  try {\r\n    const { data } = await axios.put(\r\n      `${API_URL}/api/restaurant${restaurantId}/add-favorite`,\r\n      {},\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${jwt}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    dispatch({ type: ADD_TO_FAVORITE_SUCCESS, paylod: data });\r\n    console.log(\"Add to favorite \", data);\r\n  } catch (error) {\r\n    dispatch({ type: ADD_TO_FAVORITE_FAILURE, paylod: error });\r\n    console.log(\"error\", error);\r\n  }\r\n};\r\n\r\nexport const logout = () => async (dispatch) => {\r\n  dispatch({ type: ADD_TO_FAVORITE_REQUEST });\r\n  try {\r\n    localStorage.clear();\r\n    dispatch({ type: LOGOUT });\r\n    console.log(\"Logout success \");\r\n  } catch (error) {\r\n    console.log(\"error\", error);\r\n  }\r\n};\r\n"],"mappings":"AAAA,SACEA,uBAAuB,EACvBC,uBAAuB,EACvBC,uBAAuB,EACvBC,gBAAgB,EAChBC,gBAAgB,EAChBC,gBAAgB,EAChBC,aAAa,EACbC,aAAa,EACbC,aAAa,EACbC,MAAM,EACNC,gBAAgB,EAChBC,gBAAgB,EAChBC,gBAAgB,QACX,cAAc;AACrB,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,6BAA6B;AACrD,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,OAAO,MAAMC,YAAY,GAAIC,OAAO;EAAA,IAAAC,EAAA,GAAAC,YAAA;EAAA,OAAAD,EAAA,CAAK,MAAOE,QAAQ,IAAK;IAAAF,EAAA;IAC3D,MAAMG,QAAQ,GAAGN,WAAW,CAAC,CAAC;IAC9BK,QAAQ,CAAC;MAAEE,IAAI,EAAEX;IAAiB,CAAC,CAAC;IACpC,IAAI;MACF,MAAM;QAAEY;MAAK,CAAC,GAAG,MAAMV,KAAK,CAACW,IAAI,CAC/B,GAAGV,OAAO,cAAc,EACxBG,OAAO,CAACQ,QACV,CAAC;MACD,IAAIF,IAAI,CAACG,GAAG,EAAEC,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEL,IAAI,CAACG,GAAG,CAAC;MACnD,IAAIH,IAAI,CAACM,IAAI,KAAK,uBAAuB,EAAE;QACzCZ,OAAO,CAACI,QAAQ,CAAC,mBAAmB,CAAC;MACvC,CAAC,MAAM;QACLJ,OAAO,CAACI,QAAQ,CAAC,GAAG,CAAC;MACvB;MACAD,QAAQ,CAAC;QAAEE,IAAI,EAAEV,gBAAgB;QAAEkB,MAAM,EAAEP,IAAI,CAACG;MAAI,CAAC,CAAC;MACtDK,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAET,IAAI,CAAC;IACxC,CAAC,CAAC,OAAOU,KAAK,EAAE;MACdb,QAAQ,CAAC;QAAEE,IAAI,EAAEZ,gBAAgB;QAAEoB,MAAM,EAAEG;MAAM,CAAC,CAAC;MACnDF,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEC,KAAK,CAAC;IAC7B;EACF,CAAC;IAAA,QAnBkBlB,WAAW;EAAA;AAAA,CAmB7B;AAED,OAAO,MAAMmB,SAAS,GAAIjB,OAAO,IAAK,MAAOG,QAAQ,IAAK;EACxDA,QAAQ,CAAC;IAAEE,IAAI,EAAEf;EAAc,CAAC,CAAC;EACjC,IAAI;IACF,MAAM;MAAEgB;IAAK,CAAC,GAAG,MAAMV,KAAK,CAACW,IAAI,CAC/B,GAAGV,OAAO,cAAc,EACxBG,OAAO,CAACQ,QACV,CAAC;IACD,IAAIF,IAAI,CAACG,GAAG,EAAEC,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEL,IAAI,CAACG,GAAG,CAAC;IACnD,IAAIH,IAAI,CAACM,IAAI,KAAK,uBAAuB,EAAE;MACzCZ,OAAO,CAACI,QAAQ,CAAC,mBAAmB,CAAC;IACvC,CAAC,MAAM;MACLJ,OAAO,CAACI,QAAQ,CAAC,GAAG,CAAC;IACvB;IACAD,QAAQ,CAAC;MAAEE,IAAI,EAAEd,aAAa;MAAEsB,MAAM,EAAEP,IAAI,CAACG;IAAI,CAAC,CAAC;IACnDK,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAET,IAAI,CAAC;EACrC,CAAC,CAAC,OAAOU,KAAK,EAAE;IACdb,QAAQ,CAAC;MAAEE,IAAI,EAAEhB,aAAa;MAAEwB,MAAM,EAAEG;IAAM,CAAC,CAAC;IAChDF,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEC,KAAK,CAAC;EAC7B;AACF,CAAC;AAED,OAAO,MAAME,OAAO,GAAIT,GAAG,IAAK,MAAON,QAAQ,IAAK;EAClDA,QAAQ,CAAC;IAAEE,IAAI,EAAElB;EAAiB,CAAC,CAAC;EACpC,IAAI;IACF,MAAM;MAAEmB;IAAK,CAAC,GAAG,MAAMV,KAAK,CAACuB,GAAG,CAAC,GAAGtB,OAAO,cAAc,EAAE;MACzDuB,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUZ,GAAG;MAC9B;IACF,CAAC,CAAC;IAEFN,QAAQ,CAAC;MAAEE,IAAI,EAAEjB,gBAAgB;MAAEyB,MAAM,EAAEP,IAAI,CAACG;IAAI,CAAC,CAAC;IACtDK,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAET,IAAI,CAAC;EACxC,CAAC,CAAC,OAAOU,KAAK,EAAE;IACdb,QAAQ,CAAC;MAAEE,IAAI,EAAEnB,gBAAgB;MAAE2B,MAAM,EAAEG;IAAM,CAAC,CAAC;IACnDF,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEC,KAAK,CAAC;EAC7B;AACF,CAAC;AAED,OAAO,MAAMM,aAAa,GAAGA,CAACb,GAAG,EAAEc,YAAY,KAAK,MAAOpB,QAAQ,IAAK;EACtEA,QAAQ,CAAC;IAAEE,IAAI,EAAErB;EAAwB,CAAC,CAAC;EAC3C,IAAI;IACF,MAAM;MAAEsB;IAAK,CAAC,GAAG,MAAMV,KAAK,CAAC4B,GAAG,CAC9B,GAAG3B,OAAO,kBAAkB0B,YAAY,eAAe,EACvD,CAAC,CAAC,EACF;MACEH,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUZ,GAAG;MAC9B;IACF,CACF,CAAC;IAEDN,QAAQ,CAAC;MAAEE,IAAI,EAAEpB,uBAAuB;MAAE4B,MAAM,EAAEP;IAAK,CAAC,CAAC;IACzDQ,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAET,IAAI,CAAC;EACvC,CAAC,CAAC,OAAOU,KAAK,EAAE;IACdb,QAAQ,CAAC;MAAEE,IAAI,EAAEtB,uBAAuB;MAAE8B,MAAM,EAAEG;IAAM,CAAC,CAAC;IAC1DF,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEC,KAAK,CAAC;EAC7B;AACF,CAAC;AAED,OAAO,MAAMS,MAAM,GAAGA,CAAA,KAAM,MAAOtB,QAAQ,IAAK;EAC9CA,QAAQ,CAAC;IAAEE,IAAI,EAAErB;EAAwB,CAAC,CAAC;EAC3C,IAAI;IACF0B,YAAY,CAACgB,KAAK,CAAC,CAAC;IACpBvB,QAAQ,CAAC;MAAEE,IAAI,EAAEb;IAAO,CAAC,CAAC;IAC1BsB,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;EAChC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdF,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEC,KAAK,CAAC;EAC7B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}