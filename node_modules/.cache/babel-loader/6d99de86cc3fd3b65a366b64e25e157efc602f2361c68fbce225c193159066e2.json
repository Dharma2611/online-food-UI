{"ast":null,"code":"import { api } from \"../../commponent/config/api\";\nimport { CREATE_MENU_ITEM_FAILURE, CREATE_MENU_ITEM_REQUEST, CREATE_MENU_ITEM_SUCCESS, DELETE_MENU_ITEM_FAILURE, DELETE_MENU_ITEM_REQUEST, DELETE_MENU_ITEM_SUCCESS, GET_MENU_ITEM_BY_RESTAURANT_ID_FAILURE, GET_MENU_ITEM_BY_RESTAURANT_ID_REQUEST, GET_MENU_ITEM_BY_RESTAURANT_ID_SUCCESS, SEARCH_MENU_ITEM_FAILURE, SEARCH_MENU_ITEM_REQUEST, SEARCH_MENU_ITEM_SUCCESS, UPDATE_MENU_ITEM_AVALIBLITY_REQUEST, UPDATE_MENU_ITEM_AVALIBLITY_FAILURE, UPDATE_MENU_ITEM_AVALIBLITY_SUCCESS } from \"./ActionType\";\nconst setAuthorizationHeader = jwt => ({\n  headers: {\n    Authorization: `Bearer ${jwt}` // Correctly use Authorization header\n  }\n});\nexport const createMenuItem = ({\n  menu,\n  jwt\n}) => {\n  return async dispatch => {\n    dispatch({\n      type: CREATE_MENU_ITEM_REQUEST\n    }); // Corrected dispatch usage\n    try {\n      const {\n        data\n      } = await api.post(\"/api/admin/food\", menu, setAuthorizationHeader(jwt));\n      console.log(\"create menu\", data);\n      dispatch({\n        type: CREATE_MENU_ITEM_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      console.log(\"error from create menu\", error);\n      dispatch({\n        type: CREATE_MENU_ITEM_FAILURE,\n        payload: error\n      });\n    }\n  };\n};\nexport const getMenuItemByRestaurantIdAction = reqData => {\n  return async dispatch => {\n    dispatch({\n      type: GET_MENU_ITEM_BY_RESTAURANT_ID_REQUEST\n    });\n    try {\n      // Ensure boolean values are handled correctly\n      const vegetarian = reqData.Vegetarian !== undefined ? reqData.Vegetarian : false;\n      const nonVeg = reqData.NonVeg !== undefined ? reqData.NonVeg : false;\n      const seasonal = reqData.Seasonal !== undefined ? reqData.Seasonal : false;\n\n      // Build the query string for the request\n      let url = `/api/food/restaurant/${reqData.restaurantId}?Vegetarian=${vegetarian}&NonVeg=${nonVeg}&Seasonal=${seasonal}`;\n\n      // Only append food_category if it is provided and not empty\n      if (reqData.foodCategory) {\n        url += `&food_category=${reqData.foodCategory}`;\n      }\n\n      // Log the final URL for debugging purposes\n      console.log(\"Constructed URL:\", url);\n\n      // Send the request\n      const {\n        data\n      } = await api.get(url, setAuthorizationHeader(reqData.jwt));\n      console.log(\"data by restaurant ID\", data);\n      dispatch({\n        type: GET_MENU_ITEM_BY_RESTAURANT_ID_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.log(\"Error in get menu by restaurant ID:\", error);\n      dispatch({\n        type: GET_MENU_ITEM_BY_RESTAURANT_ID_FAILURE,\n        payload: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || \"An error occurred\"\n      });\n    }\n  };\n};\nexport const searchMenuItem = ({\n  keyword,\n  jwt\n}) => {\n  return async dispatch => {\n    dispatch({\n      type: SEARCH_MENU_ITEM_REQUEST\n    }); // Corrected dispatch usage\n    try {\n      const {\n        data\n      } = await api.get(`/api/food/search?name=${keyword}`, setAuthorizationHeader(jwt));\n      console.log(\"search results\", data);\n      dispatch({\n        type: SEARCH_MENU_ITEM_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      console.log(\"error from search menu\", error);\n      dispatch({\n        type: SEARCH_MENU_ITEM_FAILURE,\n        payload: error\n      });\n    }\n  };\n};\nexport const updateMenuItem = ({\n  foodId,\n  jwt\n}) => {\n  return async dispatch => {\n    dispatch({\n      type: UPDATE_MENU_ITEM_AVALIBLITY_REQUEST\n    }); // Corrected dispatch usage\n    try {\n      const {\n        data\n      } = await api.put(`/api/admin/food/${foodId}`, {}, setAuthorizationHeader(jwt));\n      console.log(\"update\", data);\n      dispatch({\n        type: UPDATE_MENU_ITEM_AVALIBLITY_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      console.log(\"error from update menu\", error);\n      dispatch({\n        type: UPDATE_MENU_ITEM_AVALIBLITY_FAILURE,\n        payload: error\n      });\n    }\n  };\n};\nexport const deleteMenuItem = ({\n  foodId,\n  jwt\n}) => {\n  return async dispatch => {\n    dispatch({\n      type: DELETE_MENU_ITEM_REQUEST\n    }); // Corrected dispatch usage\n    try {\n      await api.delete(`/api/admin/food/${foodId}`, setAuthorizationHeader(jwt));\n      console.log(\"deleted menu item with id\", foodId);\n      dispatch({\n        type: DELETE_MENU_ITEM_SUCCESS,\n        payload: foodId\n      });\n    } catch (error) {\n      console.log(\"error from delete menu\", error);\n      dispatch({\n        type: DELETE_MENU_ITEM_FAILURE,\n        payload: error\n      });\n    }\n  };\n};","map":{"version":3,"names":["api","CREATE_MENU_ITEM_FAILURE","CREATE_MENU_ITEM_REQUEST","CREATE_MENU_ITEM_SUCCESS","DELETE_MENU_ITEM_FAILURE","DELETE_MENU_ITEM_REQUEST","DELETE_MENU_ITEM_SUCCESS","GET_MENU_ITEM_BY_RESTAURANT_ID_FAILURE","GET_MENU_ITEM_BY_RESTAURANT_ID_REQUEST","GET_MENU_ITEM_BY_RESTAURANT_ID_SUCCESS","SEARCH_MENU_ITEM_FAILURE","SEARCH_MENU_ITEM_REQUEST","SEARCH_MENU_ITEM_SUCCESS","UPDATE_MENU_ITEM_AVALIBLITY_REQUEST","UPDATE_MENU_ITEM_AVALIBLITY_FAILURE","UPDATE_MENU_ITEM_AVALIBLITY_SUCCESS","setAuthorizationHeader","jwt","headers","Authorization","createMenuItem","menu","dispatch","type","data","post","console","log","payload","error","getMenuItemByRestaurantIdAction","reqData","vegetarian","Vegetarian","undefined","nonVeg","NonVeg","seasonal","Seasonal","url","restaurantId","foodCategory","get","_error$response","_error$response$data","response","message","searchMenuItem","keyword","updateMenuItem","foodId","put","deleteMenuItem","delete"],"sources":["C:/Users/gangw/OneDrive/Desktop/online-frontend/src/State/Menu/Action.js"],"sourcesContent":["import { api } from \"../../commponent/config/api\";\r\nimport {\r\n  CREATE_MENU_ITEM_FAILURE,\r\n  CREATE_MENU_ITEM_REQUEST,\r\n  CREATE_MENU_ITEM_SUCCESS,\r\n  DELETE_MENU_ITEM_FAILURE,\r\n  DELETE_MENU_ITEM_REQUEST,\r\n  DELETE_MENU_ITEM_SUCCESS,\r\n  GET_MENU_ITEM_BY_RESTAURANT_ID_FAILURE,\r\n  GET_MENU_ITEM_BY_RESTAURANT_ID_REQUEST,\r\n  GET_MENU_ITEM_BY_RESTAURANT_ID_SUCCESS,\r\n  SEARCH_MENU_ITEM_FAILURE,\r\n  SEARCH_MENU_ITEM_REQUEST,\r\n  SEARCH_MENU_ITEM_SUCCESS,\r\n  UPDATE_MENU_ITEM_AVALIBLITY_REQUEST,\r\n  UPDATE_MENU_ITEM_AVALIBLITY_FAILURE,\r\n  UPDATE_MENU_ITEM_AVALIBLITY_SUCCESS,\r\n} from \"./ActionType\";\r\n\r\nconst setAuthorizationHeader = (jwt) => ({\r\n  headers: {\r\n    Authorization: `Bearer ${jwt}`, // Correctly use Authorization header\r\n  },\r\n});\r\n\r\nexport const createMenuItem = ({ menu, jwt }) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: CREATE_MENU_ITEM_REQUEST }); // Corrected dispatch usage\r\n    try {\r\n      const { data } = await api.post(\r\n        \"/api/admin/food\",\r\n        menu,\r\n        setAuthorizationHeader(jwt)\r\n      );\r\n      console.log(\"create menu\", data);\r\n      dispatch({ type: CREATE_MENU_ITEM_SUCCESS, payload: data });\r\n    } catch (error) {\r\n      console.log(\"error from create menu\", error);\r\n      dispatch({ type: CREATE_MENU_ITEM_FAILURE, payload: error });\r\n    }\r\n  };\r\n};\r\n\r\nexport const getMenuItemByRestaurantIdAction = (reqData) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: GET_MENU_ITEM_BY_RESTAURANT_ID_REQUEST });\r\n    try {\r\n      // Ensure boolean values are handled correctly\r\n      const vegetarian =\r\n        reqData.Vegetarian !== undefined ? reqData.Vegetarian : false;\r\n      const nonVeg = reqData.NonVeg !== undefined ? reqData.NonVeg : false;\r\n      const seasonal =\r\n        reqData.Seasonal !== undefined ? reqData.Seasonal : false;\r\n\r\n      // Build the query string for the request\r\n      let url = `/api/food/restaurant/${reqData.restaurantId}?Vegetarian=${vegetarian}&NonVeg=${nonVeg}&Seasonal=${seasonal}`;\r\n\r\n      // Only append food_category if it is provided and not empty\r\n      if (reqData.foodCategory) {\r\n        url += `&food_category=${reqData.foodCategory}`;\r\n      }\r\n\r\n      // Log the final URL for debugging purposes\r\n      console.log(\"Constructed URL:\", url);\r\n\r\n      // Send the request\r\n      const { data } = await api.get(url, setAuthorizationHeader(reqData.jwt));\r\n\r\n      console.log(\"data by restaurant ID\", data);\r\n      dispatch({ type: GET_MENU_ITEM_BY_RESTAURANT_ID_SUCCESS, payload: data });\r\n    } catch (error) {\r\n      console.log(\"Error in get menu by restaurant ID:\", error);\r\n      dispatch({\r\n        type: GET_MENU_ITEM_BY_RESTAURANT_ID_FAILURE,\r\n        payload:\r\n          error.response?.data?.message || error.message || \"An error occurred\",\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const searchMenuItem = ({ keyword, jwt }) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: SEARCH_MENU_ITEM_REQUEST }); // Corrected dispatch usage\r\n    try {\r\n      const { data } = await api.get(\r\n        `/api/food/search?name=${keyword}`,\r\n        setAuthorizationHeader(jwt)\r\n      );\r\n      console.log(\"search results\", data);\r\n      dispatch({ type: SEARCH_MENU_ITEM_SUCCESS, payload: data });\r\n    } catch (error) {\r\n      console.log(\"error from search menu\", error);\r\n      dispatch({ type: SEARCH_MENU_ITEM_FAILURE, payload: error });\r\n    }\r\n  };\r\n};\r\n\r\nexport const updateMenuItem = ({ foodId, jwt }) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: UPDATE_MENU_ITEM_AVALIBLITY_REQUEST }); // Corrected dispatch usage\r\n    try {\r\n      const { data } = await api.put(\r\n        `/api/admin/food/${foodId}`,\r\n        {},\r\n        setAuthorizationHeader(jwt)\r\n      );\r\n      console.log(\"update\", data);\r\n      dispatch({ type: UPDATE_MENU_ITEM_AVALIBLITY_SUCCESS, payload: data });\r\n    } catch (error) {\r\n      console.log(\"error from update menu\", error);\r\n      dispatch({ type: UPDATE_MENU_ITEM_AVALIBLITY_FAILURE, payload: error });\r\n    }\r\n  };\r\n};\r\n\r\nexport const deleteMenuItem = ({ foodId, jwt }) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: DELETE_MENU_ITEM_REQUEST }); // Corrected dispatch usage\r\n    try {\r\n      await api.delete(\r\n        `/api/admin/food/${foodId}`,\r\n        setAuthorizationHeader(jwt)\r\n      );\r\n      console.log(\"deleted menu item with id\", foodId);\r\n      dispatch({ type: DELETE_MENU_ITEM_SUCCESS, payload: foodId });\r\n    } catch (error) {\r\n      console.log(\"error from delete menu\", error);\r\n      dispatch({ type: DELETE_MENU_ITEM_FAILURE, payload: error });\r\n    }\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}